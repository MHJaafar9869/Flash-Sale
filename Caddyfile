{
	frankenphp
	order php_server before file_server
}

:8080 {
	root * /var/www/html/public
	encode zstd br gzip

	header {
		Access-Control-Allow-Origin *
		Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
		Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With, Idempotency-Key"
	}

	@static {
		file
		path_regexp static \.(css|js|png|jpg|jpeg|svg|gif|webp|ico|txt|woff2?)$
	}

	handle @static {
		header Cache-Control "public, max-age=86400"
		file_server
	}

	try_files {path} /index.php?{query}

	php_server

	file_server
}
